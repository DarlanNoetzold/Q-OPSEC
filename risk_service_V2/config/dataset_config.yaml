# General dataset generation configuration
dataset:
  num_users: 500  # ← Era 5000, agora 500 (10x menos)
  start_date: "2025-01-01"
  end_date: "2025-03-31"  # ← 3 meses em vez de 1 ano
  fraud_rate: 0.139
  random_seed: 42

output:
  base_path: "data"
  raw_events_dir: "raw"
  processed_dir: "processed"
  splits_dir: "splits"
  file_prefix: "digital_security_dataset"
  format: "csv"   # or csv

random_seed: 42

# Volume and time span
generation:
  num_users: 5000
  min_events_per_user: 50
  max_events_per_user: 500
  start_date: "2024-01-01"
  end_date: "2024-12-31"

  # approximate mix of event types
  event_mix:
    transaction: 0.55
    login: 0.30
    password_change: 0.02
    email_change: 0.02
    phone_change: 0.01
    address_change: 0.01
    mfa_setup: 0.02
    device_registration: 0.07

  # share of events that contain message_text (e.g., instructions, phishing, chats)
  message_text_probability:
    transaction: 0.25
    login: 0.10

# Fraud prevalence and scenarios
fraud:
  global_fraud_rate: 0.138          # 1% of events fraudulent
  user_fraudster_rate: 0.02        # 2% of users primarily fraudulent
  max_labels_per_user: 50

  # Mapping fraud_scenario -> base fraud probability multiplier
  scenario_weights:
    account_takeover: 3.0
    card_testing: 2.5
    money_mule: 2.0
    phishing_induced: 3.5
    synthetic_identity: 2.5

# Feature modules to apply (1.1–1.11)
features:
  event_identification: true
  user_account: true
  temporal_behavioral: true
  transaction_content: true
  location_network: true
  device_environment: true
  auth_security: true
  fraud_history: true
  text_content: true
  llm_features: true

# Labeling configuration (1.11)
labeling:
  enabled: true
  default_label_version: "v1.0"
  # risk tiers based on fraud scenario and synthetic rules
  risk_level_mapping:
    benign: 0
    low: 0
    medium: 1
    high: 2
    critical: 3

  # confidence by source
  confidence_by_source:
    synthetic_scenario: 0.95
    rule_engine: 0.80
    anomaly_model: 0.75
    customer_dispute: 0.60
    confirmed_incident: 0.99

# LLM / Ollama usage (1.10)
llm:
  enabled: true
  # sample of events that will be enriched with LLM features to save cost
  sample_rate:
    transaction: 0.30
    login: 0.15
    other: 0.10
  batch_size: 16

# Train/val/test split
splits:
  strategy: "time_based"   # time_based or random
  train_ratio: 0.70
  val_ratio: 0.15
  test_ratio: 0.15

temporal_patterns:
  # Peso de eventos por hora do dia (0-23)
  # Valores maiores = mais eventos naquele horário
  events_by_hour_weights:
    - 0.2   # 00h - madrugada
    - 0.1   # 01h
    - 0.1   # 02h
    - 0.1   # 03h
    - 0.1   # 04h
    - 0.2   # 05h
    - 0.6   # 06h - início da manhã
    - 1.0   # 07h
    - 1.4   # 08h - horário comercial começa
    - 1.6   # 09h
    - 1.8   # 10h
    - 2.0   # 11h - pico manhã
    - 2.0   # 12h - almoço
    - 2.1   # 13h - pico tarde
    - 2.0   # 14h
    - 2.0   # 15h
    - 1.8   # 16h
    - 1.6   # 17h
    - 1.4   # 18h - fim do expediente
    - 1.2   # 19h
    - 0.8   # 20h - noite
    - 0.6   # 21h
    - 0.4   # 22h
    - 0.3   # 23h

  # Multiplicador de fraude por período
  fraud_hour_multiplier:
    night: 1.8      # 00h-05h (madrugada = mais fraude)
    business: 1.0   # 06h-18h (horário comercial = normal)
    evening: 1.3    # 19h-23h (noite = mais fraude)

  # Multiplicador de fraude por dia da semana
  fraud_day_multiplier:
    weekday: 1.0    # Segunda a Sexta
    weekend: 1.4    # Sábado e Domingo (mais fraude)


# Fraud rate multipliers by context
fraud_multipliers:
  # Por classe de risco do usuário
  by_user_risk_class:
    low: 0.3        # usuários low risk têm 30% da taxa base
    medium: 1.0     # taxa normal
    high: 3.0       # 3x mais fraude
    very_high: 5.0  # 5x mais fraude

  # Por canal de transação
  by_channel:
    web: 1.0
    mobile_android: 0.8
    mobile_ios: 0.7
    atm: 0.5
    call_center: 1.5
    api_partner: 2.0  # APIs de parceiros = mais risco

  # Por tipo de transação
  by_transaction_type:
    pix: 1.2              # PIX = mais usado em fraude
    internal_transfer: 0.8
    bill_payment: 0.5     # pagamento de conta = menos fraude
    card: 1.0
    wire: 1.3

  # Limites
  max_fraud_probability: 0.40  # nunca passar de 40% para um único evento